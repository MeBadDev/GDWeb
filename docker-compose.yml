version: '3.9'
services:
  backend:
    build: ./backend
    environment:
      PORT: 3000
      HOST: 0.0.0.0
      STORAGE_DIR: /data/storage
      REDIS_URL: redis://cache:6379
      FIREBASE_PROJECT_ID: ${FIREBASE_PROJECT_ID}
      FIREBASE_CLIENT_EMAIL: ${FIREBASE_CLIENT_EMAIL}
      FIREBASE_PRIVATE_KEY: ${FIREBASE_PRIVATE_KEY}
    ports:
      - "3000:3000"
    volumes:
      - storage:/data/storage
    depends_on:
      - cache

  cache:
    image: redis:7-alpine
    ports:
      - "6379:6379"

volumes:
  storage:
